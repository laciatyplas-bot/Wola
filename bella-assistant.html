<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ETERNIVERSE Â· System Pisarski</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; }
body { background:#050510; color:#e0ffff; font-family:system-ui,-apple-system,sans-serif; line-height:1.6; overflow-x:hidden; }
header { padding:20px; text-align:center; border-bottom:2px solid #00ffff; background:linear-gradient(135deg,#050510,#0a0a20); }
h1 { font-size:clamp(1.5rem,4vw,2.2rem); letter-spacing:2px; margin:0; }
nav { display:flex; flex-wrap:wrap; gap:12px; padding:20px; justify-content:center; background:#0a0a20; }
nav button { padding:14px 20px; font-size:clamp(14px,2vw,18px); font-weight:900; border-radius:16px; border:none; background:#00ffff; color:#000; cursor:pointer; transition:all .3s; min-width:140px; }
nav button:hover, nav button.active { background:#fff; transform:scale(1.05); }
section { padding:24px; max-width:900px; margin:0 auto; min-height:60vh; }
#status { text-align:center; padding:20px; background:#111; border-radius:12px; margin:20px 0; }
textarea { width:100%; min-height:50vh; background:#111; color:#0ff; font-size:16px; font-family:monospace; padding:16px; border:1px solid #00ffff; border-radius:8px; resize:vertical; }
select, button { width:100%; padding:14px; margin:8px 0; font-size:16px; font-weight:900; background:#00ffff; color:#000; border:none; border-radius:8px; cursor:pointer; }
.session-timer { font-size:3rem; text-align:center; font-weight:900; color:#00ff88; margin:20px 0; }
.hidden { display:none; }
footer { text-align:center; padding:20px; opacity:.6; font-size:14px; border-top:1px solid #333; }
@media (max-width:768px) { nav { flex-direction:column; } section { padding:16px; } }
</style>
</head>
<body>

<header>
  <h1>ETERNIVERSE</h1>
  <div>ğŸ§  Bella AI Â· Kanon Bram Â· Sesja Pisarska Â© 2026</div>
</header>

<nav>
  <button onclick="navigate('writing')" class="active">âœï¸ PISANIE</button>
  <button onclick="navigate('bella')">ğŸ§  BELLA AI</button>
  <button onclick="navigate('session')">â± SESJA</button>
</nav>

<section id="writing">
  <h2 id="writing-title">Kanon Rozwijania Scen</h2>
  <div id="status">ğŸŸ¢ Gotowy | SÅ‚owa: <span id="wordcount">0</span> | Zapisano: <span id="saved">nigdy</span></div>
  
  <textarea id="editor" placeholder="ROZDZIAÅ 1... PoczÄ…tek jeszcze nie wiedziaÅ‚...">ROZDZIAÅ 1

PoczÄ…tek jeszcze nie wiedziaÅ‚, Å¼e jest poczÄ…tkiem.</textarea>
  
  <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:12px 0;">
    <select id="gate"><option>BRAMA I â€” INTERSEEKER</option><option>BRAMA II â€” ETERSEEKER</option><option>BRAMA III â€” OBFITOSEEKER</option></select>
    <select id="scene"><option>SCENA: WejÅ›cie</option><option>Narastanie</option><option>Decyzja</option><option>Konsekwencja</option></select>
  </div>
  <button onclick="expandScene()">ğŸš€ ROZWIÅƒ SCENÄ˜</button>
  <button onclick="clearEditor()">ğŸ—‘ï¸ WYÄŒYÅšÄ†</button>
  <button onclick="exportTxt()">ğŸ’¾ EKSPORT TXT</button>
</section>

<section id="bella" class="hidden">
  <h2>Bella AI â€” Asystent Narracji</h2>
  <textarea id="bella-input" placeholder="Opisz scenÄ™ do rozwiniÄ™cia..."></textarea>
  <button onclick="bellaGenerate()">GENERUJ (symulacja AI)</button>
  <div id="bella-output" style="background:#111; padding:16px; border-radius:8px; margin:12px 0; white-space:pre-wrap;"></div>
</section>

<section id="session" class="hidden">
  <h2>Sesja Pisarska</h2>
  <div class="session-timer" id="timer">25:00</div>
  <button onclick="startSession()">â–¶ï¸ START 25 MIN</button>
  <button onclick="pauseSession()">â¸ï¸ PAUZA</button>
  <div id="session-stats">SÅ‚owa dziÅ›: 0 | Cel: 500</div>
</section>

<footer>Maciej Maciuszek Â· laciatyplas-bot/Wola Â· GitHub Pages Ready</footer>

<script>
// === CORE ROUTING ===
let currentView = 'writing';
function navigate(view) {
  document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
  document.getElementById(view).classList.remove('hidden');
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  currentView = view;
  if (view === 'writing') updateWordcount();
  window.location.hash = view;
  saveState();
}
window.onhashchange = () => navigate(window.location.hash.slice(1) || 'writing');

// === PISANIE / KANON ===
const KANON = {
  inter: { enter: ['CieÅ„ byÅ‚ obecny od pierwszej chwili...', /* 20+ blokÃ³w jak poprzednio */] },
  // ... (rozszerz z poprzedniej wersji)
};
function expandScene() {
  const editor = document.getElementById('editor');
  const gate = document.getElementById('gate').value;
  const scene = document.getElementById('scene').value;
  const block = KANON[gate]?.[scene]?.[Math.floor(Math.random()*3)] || 'Brak bloku â€“ dodaj do KANON!';
  editor.value += '

' + block;
  updateWordcount();
  saveEditor();
}
function updateWordcount() {
  const text = document.getElementById('editor').value;
  document.getElementById('wordcount').textContent = text.trim().split(/s+/).length;
}
function clearEditor() { if(confirm('WyczyÅ›ciÄ‡?')) document.getElementById('editor').value = ''; localStorage.removeItem('editor'); }
function exportTxt() {
  const blob = new Blob([document.getElementById('editor').value], {type:'text/plain;charset=utf-8'});
  const a = document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='eterniverse.txt'; a.click();
}

// === BELLA AI (symulacja) ===
function bellaGenerate() {
  const input = document.getElementById('bella-input').value;
  const outputs = [
    'Bella: Twoja scena ewoluuje w kanonie INTERSEEKER. Dodaj cieÅ„: "Ukryte napiÄ™cie narastaÅ‚o..."',
    'Analiza stylu: 78% zgodne z ETERNIVERSE. Sugestia: wzmocnij wolÄ™ ETERSEEKER.',
    'Generowana kontynuacja: PrzestrzeÅ„ zareagowaÅ‚a subtelnie...'
  ];
  document.getElementById('bella-output').textContent = outputs[Math.floor(Math.random()*3)];
}

// === SESJA ===
let sessionTimer, timeLeft = 25*60, isRunning = false;
function updateTimer() {
  const min = Math.floor(timeLeft/60), sec = timeLeft%60;
  document.getElementById('timer').textContent = `${min}:${sec.toString().padStart(2,'0')}`;
}
function startSession() { if(!isRunning) { isRunning=true; sessionTimer=setInterval(()=>{ timeLeft--; updateTimer(); if(timeLeft<=0){clearInterval(sessionTimer); alert('Sesja zakoÅ„czona!'); }},1000); } }
function pauseSession() { clearInterval(sessionTimer); isRunning=false; }

// === LOCALSTORAGE ===
function saveEditor() { localStorage.setItem('editor', document.getElementById('editor').value); }
function saveState() { localStorage.setItem('currentView', currentView); }
document.getElementById('editor').addEventListener('input', ()=>{ updateWordcount(); saveEditor(); });

window.onload = () => {
  const saved = localStorage.getItem('editor');
  if(saved) document.getElementById('editor').value = saved;
  const view = localStorage.getItem('currentView') || 'writing';
  navigate(view);
  updateWordcount();
};
</script>
</body>
</html>