<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BELLA PRO — KANON</title>

<style>
body{margin:0;background:#000;color:#0ff;font-family:system-ui,sans-serif}
header{padding:14px;text-align:center;font-weight:900;border-bottom:2px solid #0ff}
textarea{width:100%;min-height:55vh;background:#111;color:#0ff;font-size:16px;padding:12px;border:none}
button,select{width:100%;padding:14px;margin-top:10px;font-size:16px;font-weight:900;background:#0ff;color:#000;border:none}
.alert{background:#200;color:#ff6b6b;padding:10px;margin-top:10px;font-weight:800}
.ok{background:#020;color:#7CFF7C;padding:10px;margin-top:10px;font-weight:800}
</style>
</head>

<body>

<header>BELLA PRO — STRAŻNIK KANONU</header>

<textarea id="book">
ROZDZIAŁ 1

Początek jeszcze nie wiedział, że jest początkiem.
</textarea>

<select id="gate">
  <option value="inter">BRAMA I — INTERSEEKER (cień, konfrontacja)</option>
  <option value="eter">BRAMA III — ETERSEEKER (wola, decyzja)</option>
  <option value="obfi">BRAMA V — OBFITOSEEKER (manifestacja)</option>
</select>

<button onclick="canon()">KANON — SPRAWDŹ I PISZ</button>

<div id="msg"></div>

<script>
const RULES={
  inter:{
    must:['cień','prawda','lęk','konfrontacja'],
    write:[
      "To, co zostało wyparte, właśnie teraz wróciło z całą siłą.",
      "Konfrontacja nie była wyborem. Była koniecznością."
    ]
  },
  eter:{
    must:['decyzja','wola','wybór','odpowiedzialność'],
    write:[
      "Decyzja zapadła, a świat przyjął ją bez sprzeciwu.",
      "Wola nadała kształt temu, co wcześniej było chaosem."
    ]
  },
  obfi:{
    must:['obfitość','przepływ','manifestacja','równowaga'],
    write:[
      "Manifestacja była skutkiem spójności, nie życzenia.",
      "Przepływ ustabilizował się dokładnie w tym miejscu."
    ]
  }
};

function canon(){
  const t=document.getElementById('book');
  const g=document.getElementById('gate').value;
  const m=document.getElementById('msg');
  const txt=t.value.toLowerCase();

  const missing=RULES[g].must.filter(w=>!txt.includes(w));

  if(missing.length){
    m.className='alert';
    m.textContent='KANON ALERT: brakuje motywów → '+missing.join(', ');
    return;
  }

  const add=
`\n${pick(RULES[g].write)}
${pick(RULES[g].write)}\n`;

  t.value+=add;
  m.className='ok';
  m.textContent='KANON OK — treść zgodna z Bramą';
}

function pick(a){return a[Math.floor(Math.random()*a.length)]}
</script>

</body>
</html>