<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ETERNIVERSE — PISANIE</title>

<style>
body {
  margin:0;
  background:#050510;
  color:#e0ffff;
  font-family: system-ui, sans-serif;
}

header {
  padding:1rem;
  background:#070720;
  border-bottom:2px solid #00ffff;
  text-align:center;
  font-weight:bold;
}

button {
  width:100%;
  padding:1rem;
  background:#00ffff;
  color:#000;
  border:none;
  font-size:1rem;
  font-weight:bold;
}

#editor {
  min-height:60vh;
  padding:1rem;
  outline:none;
  font-size:1.05rem;
  line-height:1.7;
}

.session-active header,
.session-active #startBtn {
  display:none;
}

#overlay {
  position:fixed;
  top:10px;
  right:10px;
  background:#000;
  color:#00ffff;
  padding:10px;
  border-radius:8px;
  font-size:0.9rem;
}
</style>
</head>

<body>

<header>ETERNIVERSE · PISANIE</header>

<button id="startBtn">▶ SESJA PISARSKA</button>

<div id="editor" contenteditable="true">
Dotknij tutaj i pisz.
</div>

<script>
let active=false;
let startTime=0;
let startWords=0;

const editor=document.getElementById('editor');
const btn=document.getElementById('startBtn');

btn.onclick=()=>{
  active=true;
  startTime=Date.now();
  startWords=countWords();
  document.body.classList.add('session-active');
  showOverlay();
};

function showOverlay(){
  const o=document.createElement('div');
  o.id='overlay';
  o.innerHTML=`SESJA<br><span id="t">00:00</span><br><span id="w">0</span> słów<br><br><button onclick="stop()">ZAKOŃCZ</button>`;
  document.body.appendChild(o);
  timer=setInterval(update,1000);
}

function stop(){
  active=false;
  clearInterval(timer);
  document.body.classList.remove('session-active');
  document.getElementById('overlay').remove();
}

function update(){
  document.getElementById('t').textContent=formatTime((Date.now()-startTime)/1000);
  document.getElementById('w').textContent=countWords()-startWords;
}

function countWords(){
  return editor.innerText.trim().split(/\s+/).filter(Boolean).length;
}

function formatTime(s){
  const m=Math.floor(s/60);
  const sec=Math.floor(s%60);
  return `${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
}
</script>

</body>
</html>