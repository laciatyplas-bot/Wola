<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ETERNIVERSE — BELLA PRO</title>

<style>
body{
  margin:0;
  background:#000;
  color:#0ff;
  font-family:system-ui,sans-serif;
}
header{
  padding:12px;
  text-align:center;
  font-weight:900;
  border-bottom:2px solid #0ff;
}
textarea,.editor,select{
  width:100%;
  background:#111;
  color:#0ff;
  font-size:16px;
  padding:10px;
  border:none;
}
textarea{min-height:22vh}
.editor{min-height:30vh}
button{
  width:100%;
  padding:14px;
  margin-top:8px;
  font-size:16px;
  font-weight:900;
  background:#0ff;
  color:#000;
  border:none;
}
.list button{
  background:#111;
  color:#0ff;
}
.badge{font-size:12px;opacity:.7}
.hidden{display:none}
</style>
</head>

<body>

<header>ETERNIVERSE · BELLA PRO</header>

<textarea id="input">Wklej TU całą książkę albo zostaw puste.</textarea>
<button onclick="split()">PODZIEL NA ROZDZIAŁY</button>

<div class="list" id="chapters"></div>

<div id="work" class="hidden">

  <div class="editor" id="editor" contenteditable="true"></div>

  <select id="gate">
    <option value="0">BRAMA I — INTERSEEKER (CIENIA)</option>
    <option value="1">BRAMA II — GENEZA</option>
    <option value="2">BRAMA III — ETERSEEKER (WOLA)</option>
    <option value="3">BRAMA IV — ARCHETYPY</option>
    <option value="4">BRAMA V — OBFITOSEEKER</option>
    <option value="5">BRAMA VI — CIAŁO</option>
    <option value="6">BRAMA VII — SPLĄTANIE</option>
    <option value="7">BRAMA VIII — CZAS</option>
    <option value="8">BRAMA IX — KOLEKTYW</option>
    <option value="9">BRAMA X — INTEGRACJA</option>
  </select>

  <select id="style">
    <option value="inter">Styl: InterSeeker (psychika, cień)</option>
    <option value="eter">Styl: EterSeeker (wola, decyzja)</option>
    <option value="obfi">Styl: ObfitoSeeker (manifestacja)</option>
  </select>

  <button onclick="bellaGenerate()">BELLA — NAPISZ KOLEJNY ROZDZIAŁ</button>
  <button onclick="save()">ZAPISZ ROZDZIAŁ</button>
</div>

<script>
const GATES=[
  'INTERSEEKER','GENEZA','ETERSEEKER','ARCHETYPY','OBFITOSEEKER',
  'CIAŁO','SPLĄTANIE','CZAS','KOLEKTYW','INTEGRACJA'
];

let chapters=[];
let active=null;

function split(){
  const t=input.value.trim();
  if(!t) return;
  chapters=t.split(/(?=ROZDZIAŁ|Rozdział|CHAPTER|Chapter)/g)
    .filter(x=>x.trim().length>40)
    .map(x=>({text:x.trim(),gate:0}));
  saveAll();
  render();
}

function render(){
  chaptersDiv.innerHTML='';
  chapters.forEach((c,i)=>{
    const b=document.createElement('button');
    b.innerHTML=`ROZDZIAŁ ${i+1}<br><span class="badge">BRAMA ${c.gate+1} — ${GATES[c.gate]}</span>`;
    b.onclick=()=>openChapter(i);
    chaptersDiv.appendChild(b);
  });
}

function openChapter(i){
  active=i;
  editor.innerText=chapters[i].text;
  gate.value=chapters[i].gate;
  work.classList.remove('hidden');
}

function save(){
  if(active===null) return;
  chapters[active].text=editor.innerText;
  chapters[active].gate=parseInt(gate.value,10);
  saveAll();
  render();
}

function bellaGenerate(){
  const g=parseInt(gate.value,10);
  const s=style.value;

  let seed='';
  if(s==='inter') seed='To nie jest opowieść o bohaterze. To jest konfrontacja z cieniem.';
  if(s==='eter') seed='Decyzja nie zapada w myśli. Zapada w polu.';
  if(s==='obfi') seed='Obfitość nie przychodzi. Jest aktywowana.';

  const text =
`ROZDZIAŁ ${chapters.length+1}
BRAMA ${g+1} — ${GATES[g]}

${seed}

${seed}
${seed}

[BELLA PRO — GENERACJA KANONICZNA]`;

  chapters.push({ text, gate:g });
  saveAll();
  render();
}

function saveAll(){
  localStorage.setItem('ETERNIVERSE_BELLA_PRO',JSON.stringify(chapters));
}

(function load(){
  const s=localStorage.getItem('ETERNIVERSE_BELLA_PRO');
  if(s){chapters=JSON.parse(s);render();}
})();
</script>

</body>
</html>